<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE rfc [
 <!ENTITY nbsp    "&#160;">
 <!ENTITY zwsp   "&#8203;">
 <!ENTITY nbhy   "&#8209;">
 <!ENTITY wj     "&#8288;">
]> 

<rfc xmlns:xi="http://www.w3.org/2001/XInclude" ipr="trust200902" category="std" consensus="true" docName="draft-stepanek-icalendar-jscalendar-extensions-0" obsoletes="" updates="" submissionType="IETF" xml:lang="en" tocInclude="true" symRefs="true" sortRefs="true" version="3">

  <front>
    <title abbrev="iCalendar JSCalendar Extensions">iCalendar Format Extensions for JSCalendar</title>
    <author initials="R." surname="Stepanek" fullname="Robert Stepanek">
      <organization>Fastmail</organization>
      <address>
        <postal>
	  <extaddr>PO Box 234</extaddr>
	  <street>Collins St. West</street>
          <city>Melbourne</city>
	  <region>VIC</region>
          <code>8007</code>
          <country>Australia</country>
        </postal>
        <email>rsto@fastmailteam.com</email>
      </address>
    </author>
    <date year="2025" month="May" day="12"/>
    <area>art</area>
    <workgroup>calext</workgroup>

    <keyword>calendars</keyword>
    <keyword>iCalendar</keyword>
    <keyword>JSCalendar</keyword>
    <abstract>
      <t>
        This document defines a set of new elements for iCalendar and extends the use of existing ones. Their main purpose is to extend the semantics of iCalendar with elements defined in JSCalendar, but the new definitions also aim to be useful within just the iCalendar format.  This document updates RFC 5545 ("Internet Calendaring and Scheduling Core Object Specification (iCalendar)").
      </t>
    </abstract>
  </front>
  <middle>
    <section>
      <name>Introduction</name>
      <t>
        The JSCalendar <xref target="I-D.stepanek-jscalendarbis"/> format aims to be an alternative to the iCalendar <xref target="RFC5545"/> format for representation of calendaring data.  As such, it introduces new semantics that are not covered in the current definition of iCalendar and its various extensions.  Converting calendaring data between the two formats is defined in <xref target="I-D.ietf-calext-jscalendar-icalendar"/> with the goal of not losing any semantics during conversion. To achieve this, this document defines new elements iCalendar and extends existing definitions.
      </t>
      <section anchor="notational-conventions" numbered="true" toc="default">
        <name>Notational Conventions</name>
        <t>The key words "<bcp14>MUST</bcp14>", "<bcp14>MUST NOT</bcp14>", "<bcp14>REQUIRED</bcp14>", "<bcp14>SHALL</bcp14>", "<bcp14>SHALL NOT</bcp14>", "<bcp14>SHOULD</bcp14>", "<bcp14>SHOULD NOT</bcp14>", "<bcp14>RECOMMENDED</bcp14>", "<bcp14>NOT RECOMMENDED</bcp14>", "<bcp14>MAY</bcp14>", and "<bcp14>OPTIONAL</bcp14>" in this document are to be interpreted as described in BCP 14 <xref target="RFC2119" format="default" sectionFormat="of" derivedContent="RFC2119"/> <xref target="RFC8174" format="default" sectionFormat="of" derivedContent="RFC8174"/> when, and only when, they appear in all capitals, as shown here.</t>
      </section>
      <section anchor="abnf-notations">
        <name>ABNF Notations</name>
        <t>The ABNF definitions in this document use the notations of <xref target="RFC5234"/>. ABNF rules not defined in this document are defined in either <xref target="RFC5234"/> (such as the ABNF for CRLF, WSP, DQUOTE, VCHAR, ALPHA, and DIGIT) or <xref target="RFC5545"/>.
        </t>
      </section>
    </section>
    <section>
      <name>Updated Properties</name>
      <section>
      <name>GEO Property</name>
      <t>This specification modifies the definition of the "GEO" property to also allow "geo" URI values <xref target="RFC5870"/> as property values. The following additions are made to the definition of this property, originally specified in <xref target="RFC5545" section="3.8.1.6"/>:</t>
      <dl>
        <dt>Value Type:</dt>
        <dd>The default value type for this property is FLOAT, the value MUST be two SEMICOLON-separated FLOAT values. The value type can also be set to URI, in which case the VALUE parameter <bcp14>MUST</bcp14> be set.</dd>
        <dt>Description (in addition to original):</dt>
        <dd>
          <t>A Uniform Resource Identifier for Geographic Locations ("geo" URI) allows for richer semantics than the FLOAT value, such as defining a geographic altitude, location uncertainty or the coordinate's reference system. The GEO property value <bcp14>MAY</bcp14> be of type URI to contain such coordinates. Property values of type URI <bcp14>MUST</bcp14> be valid according to the "geo" URI scheme syntax defined in <xref target="RFC5870" section="3.3"/>.</t>
      </dd>
        <dt>Format Definition:</dt>
        <dd>
            <sourcecode name=""><![CDATA[
geo         = geoorig / geouri

geoorig     = "GEO" geoparam ":" geovalue CRLF

geoparam    = *(";" other-param)

geovalue    = float ";" float
;Latitude and Longitude components

geouri      = "GEO"
                 ;
                 ; The following is REQUIRED,
                 ; but MUST NOT occur more than once.
                 ;
                 ";" "VALUE" "=" "URI"
                 ; The following is OPTIONAL,
                 ; and MAY occur more than once.
                 ;
                 *(";" other-param)
                 ;
              ":" uri CRLF
]]></sourcecode>
				</dd>
        <dt>Example:</dt>
        <dd><t>The following are examples of this property:</t>
            <sourcecode name=""><![CDATA[
GEO:37.386013;-122.082932

GEO;VALUE=URI:geo:48.198634,16.371648;crs=wgs84;u=40
]]></sourcecode>
</dd>
      </dl>
    </section>
    </section>
    <section anchor="new-properties">
      <name>New Properties</name>
      <section>
        <name>SHOW-WITHOUT-TIME Property</name>
        <dl>
          <dt>Property Name:</dt>
          <dd>SHOW-WITHOUT-TIME</dd>
          <dt>Purpose:</dt>
          <dd>To indicate that the exact time span is not important when displaying this calendar object.</dd>
          <dt>Value Type:</dt>
          <dd>BOOLEAN -- no default</dd>
          <dt>Property Parameters:</dt>
          <dd>IANA and non-standard parameters can be specified on this property.</dd>
          <dt>Conformance:</dt>
          <dd>This property can be specified once in a "VEVENT" or "VTODO" calendar component.</dd>
          <dt>Description:</dt>
          <dd>
            <t>This indicates that the exact time span is not important to display to the user when rendering this calendar object. An example of this is an event that conceptually occurs all day, but in contrast to a DATE value is limited to a specific time zone or business hours. While the time component is important for free-busy calculations and checking for scheduling clashes, calendars may choose to display it as an all-day event and/or display the object separately to other objects to enhance the user's view of their schedule.</t>
            <t>This property only is for presentation purposes, it does not have any impact on the temporal characteristics of a calendar object.</t>
            <t>This property <bcp14>MAY</bcp14> be specified on VEVENT components where the DTSTART property is of type DATE-TIME, or in VTODO components where either the DTSTART or DUE property is specified and has type DATE-TIME. In all other cases it <bcp14>MUST NOT</bcp14> be set. If this property is set, its property value <bcp14>MUST</bcp14> be "TRUE", e.g. it <bcp14>MUST</bcp14> be omitted rather than having value "FALSE".</t>
            <t>Implementations that are not aware of this property might inadvertently preserve this property when changing a calendar object's temporal type from DATE-TIME to DATE. Implementations aware of this property <bcp14>SHOULD</bcp14> therefore ignore rather than reject the incorrectly specified SHOW-WITHOUT-TIME property. They <bcp14>MUST NOT</bcp14> preserve the ill-specified property in the calendaring data.</t>
          </dd>
          <dt>Format Definition:</dt>
          <dd>
            <sourcecode name=""><![CDATA[
showwotime    = "SHOW-WITHOUT-TIME"
                ;
                ; The following is REQUIRED,
                ; but MUST NOT occur more than once.
                ;
                ";" "VALUE" "=" "BOOLEAN"
                ; The following is OPTIONAL,
                ; and MAY occur more than once.
                ;
                *(";" other-param)
                ;
                ":" "TRUE" CRLF
]]></sourcecode>
</dd>
          <dt>Example:</dt>
          <dd>
            <sourcecode name=""><![CDATA[
SHOW-WITHOUT-TIME;VALUE=BOOLEAN:TRUE
]]></sourcecode>
</dd>
        </dl>
      </section>
    </section>
    <section anchor="new-parameters">
      <name>New Parameters</name>
    </section>
    <section anchor="security-considerations" numbered="true" toc="default">
      <name>Security Considerations</name>
      <t>This specification extends <xref target="RFC5545"/>.  The same security considerations as outlined in <xref target="RFC5545" sectionFormat="of" section="7"/> apply.</t>
    </section>
    <section anchor="IANA">
      <name>IANA Considerations</name>
    </section>
  </middle>
  <back>

    <references>
      <name>References</name>
      <references>
        <name>Normative References</name>
        <xi:include href="https://www.rfc-editor.org/refs/bibxml/reference.RFC.2119.xml"/>
        <xi:include href="https://www.rfc-editor.org/refs/bibxml/reference.RFC.5234.xml"/>
        <xi:include href="https://www.rfc-editor.org/refs/bibxml/reference.RFC.5545.xml"/>
        <xi:include href="https://www.rfc-editor.org/refs/bibxml/reference.RFC.5870.xml"/>
        <xi:include href="https://www.rfc-editor.org/refs/bibxml/reference.RFC.8174.xml"/>
      </references>
    </references>
    <references>
      <name>Informative References</name>
        <reference anchor="I-D.ietf-calext-jscalendar-icalendar" target="https://datatracker.ietf.org/doc/draft-ietf-calext-jscalendar-icalendar/">
          <front>
            <title>JSCalendar: Converting from and to iCalendar</title>
            <author fullname="Robert Stepanek" initials="R." surname="Stepanek">
              <organization>Fastmail</organization>
            </author>
            <date day="12" month="May" year="2025"/>
          </front>
          <seriesInfo name="Internet-Draft" value="draft-ietf-calext-jscalendar-icalendar"/>
        </reference>
        <reference anchor="I-D.stepanek-jscalendarbis" target="https://datatracker.ietf.org/doc/draft-stepanek-jscalendarbis/">
          <front>
            <title>JSCalendar: A JSON Representation of Calendar Data</title>
            <author fullname="Neil Jenkins" initials="N.M." surname="Jenkins">
              <organization>Fastmail</organization>
            </author>
            <author fullname="Robert Stepanek" initials="R." surname="Stepanek">
              <organization>Fastmail</organization>
            </author>
            <date day="12" month="May" year="2025"/>
          </front>
          <seriesInfo name="Internet-Draft" value="draft-stepanek-jscalendarbis"/>
        </reference>
    </references>
  </back>
</rfc>
